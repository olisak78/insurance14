apiVersion: v1
kind: Secret
metadata:
  name: {{ include "developer-portal-backend.fullname" . }}
  labels:
    {{- include "developer-portal-backend.labels" . | nindent 4 }}
type: Opaque
stringData:
  # Database Password
  DB_PASSWORD: {{ include "developer-portal-backend.databasePassword" . | quote }}
  
  # JWT Secret
  JWT_SECRET: {{ .Values.jwt.secret | quote }}
  
  # LDAP Password
  LDAP_BIND_PW: {{ .Values.ldap.bindPassword | quote }}
  
  # Jira Password
  JIRA_PASSWORD: {{ .Values.jira.password | quote }}
  
  # Sonar Token
  SONAR_TOKEN: {{ .Values.sonar.token | quote }}
  
  # GitHub OAuth Credentials - Tools
  GITHUB_TOOLS_APP_CLIENT_ID: {{ .Values.github.tools.clientId | quote }}
  GITHUB_TOOLS_APP_CLIENT_SECRET: {{ .Values.github.tools.clientSecret | quote }}
  
  # GitHub OAuth Credentials - WDF
  GITHUB_WDF_APP_CLIENT_ID: {{ .Values.github.wdf.clientId | quote }}
  GITHUB_WDF_APP_CLIENT_SECRET: {{ .Values.github.wdf.clientSecret | quote }}
  
  # OAuth Encryption Key
  OAUTH_ENCRYPTION_KEY: {{ .Values.oauth.encryptionKey | quote }}
  
  # Jenkins Credentials
  JENKINS_P_USER: {{ .Values.jenkins.pUser | quote }}
  JENKINS_ATOM_JAAS_TOKEN: {{ .Values.jenkins.atomJaasToken | quote }}
  JENKINS_GKECFSMULTICIS2_JAAS_TOKEN: {{ .Values.jenkins.gkecfsmulticis2JaasToken | quote }}
  JENKINS_ATOMPERF_JAAS_TOKEN: {{ .Values.jenkins.atomperfJaasToken | quote }}
---
{{- if .Values.aiCore.credentials }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "developer-portal-backend.fullname" . }}-ai-core
  labels:
    {{- include "developer-portal-backend.labels" . | nindent 4 }}
type: Opaque
stringData:
  # AI Core Credentials (as JSON array)
  AI_CORE_CREDENTIALS: {{ .Values.aiCore.credentials | toJson | quote }}
{{- end }}

